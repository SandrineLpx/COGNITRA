# Iteration Log (Clean)

Concise milestone log. Full detailed history is preserved in `ITERATION_LOG_FULL.md`.

| Iteration | Date | Update | Reason | Improvement |
|---|---|---|---|---|
| v1.0 | 2026-02-11 | Replaced `call_model()` stub in `src/model_router.py` with a working extraction pipeline. | App was blocked by `NotImplementedError` during ingest. | End-to-end ingest path became runnable. |
| v1.1 | 2026-02-11 | Expanded source taxonomy (`S&P`, `MarkLines`) and centralized schema constants in `src/constants.py`. | Needed additional publisher labels and cleaner shared config. | Consistent enums and easier maintenance across modules. |
| v1.2 | 2026-02-11 | Introduced two-layer geography processing in `src/postprocess.py` and integrated it into ingest/router flow. | Needed normalized geographic fields and strict footprint relevance. | Cleaner `country_mentions`, controlled `regions_mentioned`, reliable `regions_relevant_to_apex_mobility`. |
| v1.3 | 2026-02-11 | Strengthened validation in `src/schema_validate.py` (duplicates, size bounds, footprint checks). | Reduce malformed records entering storage. | Higher record quality and safer downstream analytics. |
| v1.4 | 2026-02-12 | Wired Gemini via `google-genai` with structured output schema and provider routing/logging. | Needed production model calls instead of local-only behavior. | Deterministic JSON extraction with clearer provider errors. |
| v1.5 | 2026-02-12 | Hardened Gemini schema compatibility (SDK-valid types/nullable handling) and prompt rules for extraction reliability. | Early API calls failed on unsupported schema shapes. | Stable Gemini request/response behavior and better extraction consistency. |
| v1.6 | 2026-02-12 | Added secrets support (`.streamlit/secrets.toml` + env fallback), secrets template, and `.gitignore` protection. | Simplify local key management and avoid leaking credentials. | Safer configuration workflow for API keys. |
| v1.7 | 2026-02-12 | Aligned docs and repo hygiene (`README` updates, constants consistency, data normalization pass). | Version drift between implementation and documentation. | Clearer onboarding and consistent behavior across existing/new records. |
| v1.8 | 2026-02-12 | Implemented duplicate detection and story-level deduplication in `src/dedupe.py`. | Needed to prevent same story from appearing multiple times across publishers when exporting/reporting. | Canonical record selection with detailed publisher ranking (S&P=100 > Bloomberg=90 > Reuters=80 > ... Other=50), confidence scoring, and completeness scoring. |
| v1.9 | 2026-02-12 | Added CLI script `scripts/dedupe_jsonl.py` for bulk JSONL deduplication and export. | Enable analysts to generate deduplicated datasets (canonical + duplicates JSONL files) without hitting Streamlit UI limits. | Deterministic deduplication output with CSV export support; includes diagnostic stats (dedup rate, duplicate count). |
| v2.0 | 2026-02-12 | Created weekly briefing module `src/briefing.py` with weekly candidate selection and executive email generation. | Needed structured workflow to select, filter, and draft weekly intelligence summaries for stakeholders. | Auto-suppresses duplicates in briefs; prioritizes High/High (share-ready) items; renders Markdown brief + email body templates. |
| v2.1 | 2026-02-12 | Added new page `pages/06_Weekly_Brief.py` for weekly digest workflow. | Enable analysts to select items for the week, preview, and draft executive emails with one-click share-ready suggestions. | Selectable candidate list, multi-item filtering by date range, and template email generation. |
| v2.2 | 2026-02-12 | Integrated deduplication toggle into Dashboard (`pages/04_Dashboard.py`) and Export/Admin (`pages/05_Export_Admin.py`). | Allow users to see analytics on canonical vs. all records; enable export in either mode. | Added sidebar toggle for Dashboard; added metrics and bulk export button in Export/Admin for canonical/duplicates JSONL. |
| v2.3 | 2026-02-12 | Created comprehensive test suite `test_scenarios.py` with 25+ test cases covering duplicate detection, deduplication, source ranking, weekly briefing logic. | Ensure quality and regression prevention as new features are added. | Full scenario coverage: exact duplicate detection, similar story matching, publisher ranking hierarchy, briefing workflow. |
| v2.4 | 2026-02-12 | Applied repo hygiene fixes: moved URL override before postprocess in ingest, expanded `.gitignore` for local/dev artifacts, and marked `ITERATION_LOG_FULL.md` as historical/superseded detail. | Prevent URL sanitation bypass, reduce accidental local-file commits, and clarify which log is authoritative. | More reliable ingest normalization, cleaner version control hygiene, and lower documentation confusion. |
| v2.5 | 2026-02-12 | Standardized Gemini schema strategy in `src/model_router.py` to SDK-style `type` + `nullable` fields (removed mixed nullable styles), and normalized validation message text in `src/schema_validate.py` to ASCII ranges. | Reduce schema compatibility churn and remove UI/log text encoding artifacts. | More stable model-call behavior and cleaner, consistent validation messages. |
| v2.6 | 2026-02-13 | Replaced basic context assembly with deterministic chunk selection (`src/context_pack.py`) and ingest-side chunk diagnostics (`pages/01_Ingest.py`). | Raw PDF text included too much noise and weak signal prioritization for model prompts. | Higher-signal context packs (header + body chunking/scoring) with bounded size and optional visibility into selected chunks/flags. |
| v2.7 | 2026-02-13 | Improved extraction reliability by passing `ORIGINAL_URL` into context and adding deterministic postprocess inference for `publish_date` + `source_type` (`src/postprocess.py`, `pages/01_Ingest.py`). | Model-only extraction missed obvious dates/publisher markers in messy documents. | Better date fill-rate (ISO conversion from common patterns), stronger publisher classification (S&P/MarkLines/Automotive News/Reuters), and safer manual URL precedence. |
| v2.8 | 2026-02-13 | Added conservative text cleanup stage (`src/text_cleanup.py`) and ingest controls/previews for raw vs cleaned text with removal diagnostics. | Noisy PDF exports (ads/nav/license/link farms) were degrading entity/topic/date extraction quality. | Deterministic boilerplate suppression, repeated line/block dedupe, and fallback guard to avoid over-cleaning; cleaner input for chunking and LLM extraction. |
| v2.9 | 2026-02-13 | Unified text cleanup and chunking into `src/text_clean_chunk.py` with diagnostics (removed-line counts, pattern breakdown, detected title, chunk IDs). | Previous cleanup (`clean_text.py`, `text_cleanup.py`) was split across modules with no chunk output; noisy PDFs still sent too much irrelevant text to the model. | Single `clean_and_chunk()` entry point: normalizes lines, removes nav/promo/paywall/social/link-heavy/repeated-header noise, fixes hyphen breaks, deduplicates blocks, and produces overlapping model-ready chunks (9K chars each, 800-char overlap) with full removal diagnostics shown in Ingest UI. |
| v3.0 | 2026-02-13 | Implemented two-pass model strategy in `src/model_router.py`: Gemini Flash-Lite (pass 1) with automatic fallback to Gemini Flash (pass 2) on validation/quality failure. | Most documents are straightforward and do not need the stronger model; spending full Flash tokens on every doc wastes cost. Hard/noisy documents need the stronger model to get dates, source_type, and evidence right. | Cost-efficient extraction: Flash-Lite handles easy docs cheaply; Flash is invoked only when pass 1 fails schema validation or quality heuristics. Per-call token usage is logged and surfaced in the Ingest UI. |
| v3.1 | 2026-02-13 | Added per-call token usage logging (`_extract_usage`) and Ingest-side usage summary display. | No visibility into how many tokens each extraction consumed or which model was used. | Token consumption (prompt/output/total) and model name shown after each ingest; supports both single-doc and chunked modes; enables cost tracking and optimization. |
| v3.2 | 2026-02-13 | Hardened extraction prompt with publisher-vs-cited-source rules, strict date normalization patterns, short evidence bullet constraints, and list deduplication instructions. | Model confused publisher with cited sources (e.g., S&P article citing Reuters → output "Reuters" as source_type); evidence bullets were too long; lists contained US/USA/U.S. variants. | Correct source_type classification (publisher, not cited source), consistent date parsing (multiple patterns), evidence bullets capped at 25 words, deduplicated/normalized list fields. |
| v3.3 | 2026-02-13 | Added chunked extraction mode in Ingest: splits cleaned text into overlapping chunks, extracts each independently, then merges via `_merge_chunk_records` with majority-vote and dedup logic. | Long/noisy documents exceeded context pack limits or lost important signals when truncated to a single context window. | Better coverage of long documents; merged records use majority voting for source_type/actor_type, union+dedup for entities/topics/regions, highest-confidence date selection, and short-bullet filtering for evidence. |
| v3.4 | 2026-02-13 | Added `_nullable()` helper in schema definition and `_should_retry_strong()` for smarter repair routing; fix_json_prompt now includes validation error details. | Gemini SDK `any_of` nullable pattern needed consistent use; repair calls lacked context about what was wrong; some API errors warranted strong-model retry while others did not. | Cleaner nullable schema handling, targeted repair prompts with specific validation errors, and selective escalation to stronger model only on schema/structural failures. |
| v3.5 | 2026-02-13 | Implemented LLM-generated Weekly Executive Brief: `_call_gemini_text()` in `src/model_router.py`, `synthesize_weekly_brief_llm()` in `src/briefing.py`, and AI Brief button in `pages/06_Weekly_Brief.py`. | The deterministic brief only listed titles and first insights; the flagship deliverable requires cross-record LLM synthesis following the executive report template. | One-click AI brief generation from selected records; uses Gemini Flash (stronger model) for multi-record synthesis; follows the exact Weekly Executive Report template (exec summary, high-priority developments, footprint region signals, topic developments, emerging trends, recommended actions); token usage displayed; input capped at 20 records with priority/confidence ranking. |
| v3.6 | 2026-02-13 | Redesigned review UX: Inbox now shows title-first expandable cards with inline Approve/Review buttons and batch actions; Record page adds Next/Previous navigation, title+metrics header, and Quick Approve with auto-advance. | Review was record-by-record via opaque record IDs, requiring page navigation for every action. | Analysts can scan key insights and evidence inline, approve without opening records, batch-approve filtered sets, and step through records sequentially with one-click Quick Approve that auto-advances to next unreviewed. |
| v3.7 | 2026-02-13 | Simplified review model from 3 states (Not Reviewed/Reviewed/Approved) to 2 states (Pending/Approved) with deterministic auto-approve at ingest. Updated `src/constants.py`, `src/schema_validate.py`, `pages/01_Ingest.py`, `pages/02_Inbox.py`, `pages/03_Record.py`, `pages/04_Dashboard.py`. | Three review states confused the single-analyst workflow; no distinction needed between "looked at" and "ready for brief". | Clean extractions (confidence not Low, publish_date present, source_type not Other, 2+ evidence bullets) are auto-approved at ingest; uncertain ones start as Pending for manual review. Legacy records with old statuses are normalized transparently. |
| v3.8 | 2026-02-13 | Added bulk PDF ingest: multi-file uploader with progress bar, per-file extraction loop, and summary table. Refactored single-file pipeline into reusable `_process_one_pdf()` and `_finalize_record()` helpers (`pages/01_Ingest.py`). | Processing articles one at a time was slow; analysts needed to repeat the upload-extract-save cycle for each document. | Upload multiple PDFs at once; each produces 1 record via chunked extraction + merge; progress bar tracks per-file status; summary table shows saved/skipped/failed counts; deduplication checks both filename and extracted title against existing records and within the batch; single-file mode with title/URL/paste options preserved. |
| v3.9 | 2026-02-13 | Inbox now sorts records newest-first by `created_at` (fallback `publish_date`); Weekly Brief default date range increased from 7 to 30 days (max 90); Dashboard datetime parsing fixed to handle UTC-aware timestamps (`pages/02_Inbox.py`, `pages/04_Dashboard.py`, `pages/05_Weekly_Brief.py`). | Inbox showed records in insertion order which buried new articles; Weekly Brief 7-day default excluded most articles with older publish dates; Dashboard crashed on mixed timezone-aware/naive datetime comparisons. | Latest articles appear first in Inbox; Weekly Brief shows all recent records by default; Dashboard timeline charts work reliably with UTC-normalized timestamps. |
| v4.0 | 2026-02-13 | Added three trend analysis charts to Dashboard (`pages/04_Dashboard.py`): Topic Momentum (rising/falling topics), Top Company Mentions (top 10 by frequency), Priority Distribution Over Time (weekly stacked bars). | Dashboard showed static snapshots but lacked temporal trend analysis — the core value of a CI tool is spotting change over time. | Topic Momentum splits the date range in half and shows which topics are heating up vs cooling down; Company Mentions surfaces the most-tracked OEMs/competitors; Priority Distribution reveals whether market volatility is increasing. All zero-token-cost (deterministic pandas aggregations). |
| v4.1 | 2026-02-14 | Upgraded Dashboard charts with weighted counting, classification, and secondary metrics (`pages/04_Dashboard.py`). Added unit-testable helpers: `weighted_explode`, `explode_list_column`, `classify_topic_momentum`, `canonicalize_company`, `week_start`, `get_effective_date`. | Charts used naive unweighted counts (double-counting multi-topic records), lacked trend classification labels, had no normalized momentum score, and company mentions counted duplicates within records. | Topic Momentum now uses weighted counts (1/n per topic), adds pct_change + Emerging/Expanding/Fading/Stable classification, renders via Altair with tooltips and detail table; Company Mentions dedupes within each record and applies canonicalization; Priority chart adds High-Ratio + Volatility Index secondary line chart; all list parsing handles stringified lists safely via `_safe_list`. |
| v4.2 | 2026-02-14 | Added Original Documents library page (`pages/07_Documents.py`) with filters, clickable source links, and per-record detail expanders. | No centralized view of source documents; analysts had to open individual records to find original URLs or local PDF paths. | Filterable document library (date range, topic, company, review status, priority, text search); link fallback chain (`original_url` > `source_pdf_path` > "No link"); expandable cards with evidence bullets, notes, and router usage summary; one-click navigation to full Record page. |
| v4.3 | 2026-02-14 | Added priority classification rules to extraction prompt (rule 8) and deterministic `_boost_priority()` postprocess override in `src/postprocess.py`. | Model defaulted all records to Medium priority because no criteria were specified; broke Priority Distribution chart and share-ready filtering. | Prompt now defines High/Medium/Low with Apex Mobility-specific criteria (footprint regions, closure tech, key OEMs, regulatory impact). Postprocess deterministically upgrades to High when: `mentions_our_company` is true, footprint region + closure topic/keyword, or footprint region + key OEM customer. Existing records need re-ingest to benefit. |
| v4.4 | 2026-02-14 | Added API quota tracker (`src/quota_tracker.py`), smart chunk mode recommendations, and sidebar quota display in Ingest. Wired `record_call()` into `_call_gemini` and `_call_gemini_text`. | 20 RPD limit on Flash-Lite free tier made quota invisible; chunked mode used multiple calls on short docs unnecessarily; no way to see remaining calls. | Sidebar shows live per-model usage/remaining with progress bars (resets midnight PT via `data/api_usage.json`); single-file mode shows chunk count advisory ("clean article" vs "N API calls" warning); bulk mode shows worst-case call estimate vs remaining quota before run. |
| v4.5 | 2026-02-14 | Implemented meta-based model routing and per-chunk repair: `_classify_noise()` in `pages/01_Ingest.py`, `extract_single_pass()` in `src/model_router.py`, two-phase chunk loop. | Each chunk independently ran the full two-pass (lite → flash), wasting API calls when the lite model failed on noisy documents. With 20 RPD per model, every call counts. | Noise classification from cleanup meta (removed_ratio, line count, pattern types) routes high-noise docs directly to Flash; Phase 1 runs all chunks on chosen model, Phase 2 retries only failed chunks with the stronger model; router_log now includes noise_level, initial_model, removed_ratio, chunks_succeeded_initial, chunks_repaired, chunks_failed_final. |
| v4.6 | 2026-02-16 | Hardened deterministic postprocess for Mercedes/Bloomberg regressions (`src/postprocess.py`): source-grounded `mentions_our_company`, publisher header date parsing with override diagnostics, and event-date header filtering. | False positives and date drift occurred when LLM outputs conflicted with source evidence and header timestamps. | More reliable mentions/date fields with auditable `_publisher_date_override_*` diagnostics and safer event-date extraction. |
| v4.7 | 2026-02-16 | Refined macro-theme precision and SDV behavior (`src/constants.py`, `src/postprocess.py`, `test_macro_themes.py`). | Macro themes were over-sensitive to commentary fields and under-firing on legal-entity/company variants. | Source-grounded theme matching (notes excluded), legal-entity company canonicalization, SDV company+keyword/topic support, SDV strength calibration, and structural China+SDV rollup with expanded regressions. |
| v4.8 | 2026-02-16 | Migrated footprint region model to Option B buckets (`Western Europe`, `Eastern Europe`, `Russia`) with backward-compatible migration/audit flags. | Legacy `Europe (including Russia)` bucket was too coarse for analysis and routing. | Deterministic country-to-region bucketing, legacy value migration (`_region_migrations`), generic-Europe ambiguity audit (`_region_ambiguity`), and updated region-gated theme behavior/tests. |
| v4.9 | 2026-02-16 | Updated ingest/synthesis prompts and UI behavior (`pages/01_Ingest.py`, `src/model_router.py`, `src/briefing.py`). | Needed clearer ingest UX plus sharper, numerically grounded weekly briefs. | Ingest now uses automatic chunking guidance (no manual toggle), extraction prompt enforces numeric evidence bullet quality, and weekly synthesis prompt adds numeric/Tier-1/tone/length-scaling/rollup-elevation instructions; tests remain green. |
| v5.0 | 2026-02-17 | Fixed `regions_bucketed_deduped` dropping primary LLM-extracted regions; added Asia to `FOOTPRINT_REGIONS`, Asian countries to `COUNTRY_TO_FOOTPRINT`, `REGION_ALIASES` for asia/apac, city hints (Tokyo, Seoul, etc.) (`src/constants.py`, `src/postprocess.py`). | Bloomberg Toyota CEO article: `["Asia"]` was being converted to `["US","China"]` because Asia wasn't in FOOTPRINT_REGIONS and Japan wasn't mapped. Primary LLM-extracted regions were silently dropped. | Primary regions preserved; country-inferred regions added without removing existing ones; 8 new region tests created (`tests/test_regions_bucketed.py`). |
| v5.1 | 2026-02-17 | Added Japan as standalone `FOOTPRINT_REGION` (not just bucketed into generic Asia); city hints now produce both `["Japan", "Asia"]` (`src/constants.py`, `src/postprocess.py`). | Japan is a Apex Mobility-relevant market with major OEM activity (Toyota, Honda, Nissan) — needs country-level granularity in `regions_relevant_to_apex_mobility`, not just generic "Asia". | Japan appears as its own footprint region alongside Asia; Tokyo/Osaka/Nagoya map to both Japan and Asia; updated tests pass. |
| v5.2 | 2026-02-17 | Expanded `COUNTRY_TO_FOOTPRINT` with ~18 countries (Canada→US, Sweden/Austria/Belgium etc.→Western Europe, Serbia/Croatia→Eastern Europe, Egypt/Nigeria→Africa, South Korea/Taiwan/Vietnam etc.→Asia); relaxed topics max 3→4, keywords 5-12→3-15; added source types `Financial News` and `Industry Publication`; added actor_type `technology` (`src/constants.py`, `src/postprocess.py`, `src/model_router.py`, `src/schema_validate.py`). | Audit found gaps: missing country mappings caused valid intelligence to be lost; schema was too restrictive (articles with 4 topics or 3 keywords failed validation); source_type "Other" was too broad; no actor_type for tech companies. | Broader country coverage; fewer false validation failures; better source classification; correct actor_type for Nvidia/Qualcomm/Google articles; 9 new tests, all 89 pass. |
| v5.3 | 2026-02-17 | Implemented two-tier region architecture: `DISPLAY_REGIONS` (broad buckets: Asia, Western Europe, Eastern Europe, Africa, US, Latin America) for `regions_mentioned`; `FOOTPRINT_REGIONS` (country-level: India, China, Japan, Thailand, Mexico, Russia + display regions) for `regions_relevant_to_apex_mobility`; `FOOTPRINT_TO_DISPLAY` collapse map (`src/constants.py`, `src/postprocess.py`, `src/schema_validate.py`). | `regions_mentioned` was mixing geographic regions with individual countries (e.g., `["Japan", "India", "Asia"]`), making analytics noisy; user feedback: "regions should be only regions, not countries". | Clean separation: `regions_mentioned` contains only broad geographic buckets; `regions_relevant_to_apex_mobility` retains country-level granularity for Apex Mobility operational analysis; macro-theme region matching uses union of both fields so country-level matching still works; all 89 tests rewritten and pass. |
| v5.4 | 2026-02-17 | Consolidated `References/SKILL.md` into `AGENTS.md`; merged unique content (Apex Mobility domain scope, ingest flow, priority heuristics, review gating, two-tier region docs); moved SKILL.md to `References/Archives/`; `CLAUDE.md` reduced to 3-line pointer to `AGENTS.md`. | SKILL.md overlapped heavily with CLAUDE.md/AGENTS.md but contained outdated information (wrong pages, removed schema fields, old regions/actor_types/review statuses). | Single canonical instruction file (`AGENTS.md`) for AI agents and human engineers; no more duplicate/outdated spec files; `CLAUDE.md` points to `AGENTS.md` to avoid split maintenance. |
| v5.5 | 2026-02-17 | Cleaned `References/topic-taxonomy.md` and `References/context-watchlist.md`: removed content duplicating code (outdated regions, priority rules); renamed context-watchlist to `company-watchlist.md`; created `References/QUARTERLY_REVIEW.md` maintenance checklist. | Both reference files contained outdated information that drifted from code; redundant priority/region sections duplicated what was already in `AGENTS.md` and `src/constants.py`. | Reduced reference files from 3 to 1 (company-watchlist.md = market intelligence only); quarterly review process formalized with ordered checklist (lowest-risk first). |
| v5.6 | 2026-02-17 | Embedded topic tagging guidance and competitor context into extraction prompt (`src/model_router.py`); moved topic guidance into `src/constants.py` as comments; deleted `References/topic-taxonomy.md`; added Apex Mobility identity as prompt opening. | LLM received only topic names in schema enum — no disambiguation guidance. Topic tagging rules and competitor lists existed in reference files but were never wired into the extraction prompt. | LLM now receives: (1) Apex Mobility identity for domain context, (2) per-topic use/don't-use rules for classification boundaries, (3) Tier 1/2 closure competitors by name for correct actor_type tagging. Topic guidance maintained in one place (code + prompt) instead of 4-5 files. Updated QUARTERLY_REVIEW.md to reflect simplified structure; all 89 tests pass. |
| v5.7 | 2026-02-17 | Documented spec-to-code consolidation iteration in technical report (`docs/technical_report_v1.0.md`): rewrote §6.1 as 3-phase narrative (spec-first → drift → consolidation), added §7.5.8 as meaningful iteration with before/after prompt comparison and options-considered table, updated §10.1/10.2 with lessons learned. | Technical report needed to document the design evolution from external spec files to code-embedded LLM guidance, including the rationale, alternatives considered, and impact on extraction quality. | Report now covers the full building process transparently: what started as good design practice (spec-first), what went wrong (drift during iterative AI-assisted development), how it was fixed (embed guidance where it's consumed), and why it matters (LLM classification quality improved). |
| v5.8 | 2026-02-17 | Completed organization hardening pass: added `pyproject.toml` + `requirements.txt`, updated install docs in `README.md`, expanded `.gitignore`, and removed tracked runtime artifacts (`src/__pycache__/*.pyc`, `data/pdfs/*`) from version control index. | Repo had generated/runtime files in git history and no canonical project metadata file for reproducible setup. | Cleaner repository hygiene, clearer onboarding/install path, and lower risk of accidental binary/cache commits. |
| v5.9 | 2026-02-17 | Consolidated duplicate processing paths: made `src/dedupe.py` the canonical dedupe+rank implementation (`dedup_and_rank`), converted `src/dedup_rank.py` to compatibility wrapper, and aligned legacy cleaners (`src/clean_text.py`, `src/text_cleanup.py`) to use `src/text_clean_chunk.py`. | Parallel implementations were creating maintenance drift risk and potential behavioral inconsistencies between ingest, dashboard/admin, and weekly brief flows. | Single core path for dedupe/cleaning behavior across ingest-to-brief pipeline; reduced code drift; full test suite remained passing. |
| v6.0 | 2026-02-17 | Standardized agent-instruction files for cross-LLM tooling: created canonical `AGENTS.md` and converted `CLAUDE.md` into a pointer wrapper. | Tool-specific instruction files increase maintenance overhead and can diverge over time. | One source of truth for agent instructions with backward compatibility for Claude-style tooling. |
| v6.1 | 2026-02-17 | Performed runtime context-path audit for ingest and weekly brief generation; confirmed `References/*.md` files are advisory and not consumed by runtime extraction/brief logic. | Needed architectural clarity before wiring additional context into prompts and cleaning documentation scope. | Clear separation between runtime inputs (PDF/chunks/JSON records) and human reference docs; reduced ambiguity about where quality improvements must be implemented. |
